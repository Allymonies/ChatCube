'use strict';

var hasSymbols = require('has-symbols')();
var GetIntrinsic = require('get-intrinsic');
var callBound = require('call-bind/callBound');

var $iterator = GetIntrinsic('%Symbol.iterator%', true);
var $stringSlice = callBound('String.prototype.slice');

module.exports = function getIteratorMethod(ES, iterable) ***REMOVED***
	var usingIterator;
	if (hasSymbols) ***REMOVED***
		usingIterator = ES.GetMethod(iterable, $iterator);
	***REMOVED*** else if (ES.IsArray(iterable)) ***REMOVED***
		usingIterator = function () ***REMOVED***
			var i = -1;
			var arr = this; // eslint-disable-line no-invalid-this
			return ***REMOVED***
				next: function () ***REMOVED***
					i += 1;
					return ***REMOVED***
						done: i >= arr.length,
						value: arr[i]
					***REMOVED***;
				***REMOVED***
			***REMOVED***;
		***REMOVED***;
	***REMOVED*** else if (ES.Type(iterable) === 'String') ***REMOVED***
		usingIterator = function () ***REMOVED***
			var i = 0;
			return ***REMOVED***
				next: function () ***REMOVED***
					var nextIndex = ES.AdvanceStringIndex(iterable, i, true);
					var value = $stringSlice(iterable, i, nextIndex);
					i = nextIndex;
					return ***REMOVED***
						done: nextIndex > iterable.length,
						value: value
					***REMOVED***;
				***REMOVED***
			***REMOVED***;
		***REMOVED***;
	***REMOVED***
	return usingIterator;
***REMOVED***;
