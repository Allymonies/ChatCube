'use strict';

var GetIntrinsic = require('../GetIntrinsic.js');

var $construct = GetIntrinsic('%Reflect.construct%', true);

var DefinePropertyOrThrow = require('./DefinePropertyOrThrow');
try ***REMOVED***
	DefinePropertyOrThrow(***REMOVED******REMOVED***, '', ***REMOVED*** '[[Get]]': function () ***REMOVED******REMOVED*** ***REMOVED***);
***REMOVED*** catch (e) ***REMOVED***
	// Accessor properties aren't supported
	DefinePropertyOrThrow = null;
***REMOVED***

// https://ecma-international.org/ecma-262/6.0/#sec-isconstructor

if (DefinePropertyOrThrow && $construct) ***REMOVED***
	var isConstructorMarker = ***REMOVED******REMOVED***;
	var badArrayLike = ***REMOVED******REMOVED***;
	DefinePropertyOrThrow(badArrayLike, 'length', ***REMOVED***
		'[[Get]]': function () ***REMOVED***
			throw isConstructorMarker;
		***REMOVED***,
		'[[Enumerable]]': true
	***REMOVED***);

	module.exports = function IsConstructor(argument) ***REMOVED***
		try ***REMOVED***
			// `Reflect.construct` invokes `IsConstructor(target)` before `Get(args, 'length')`:
			$construct(argument, badArrayLike);
		***REMOVED*** catch (err) ***REMOVED***
			return err === isConstructorMarker;
		***REMOVED***
	***REMOVED***;
***REMOVED*** else ***REMOVED***
	module.exports = function IsConstructor(argument) ***REMOVED***
		// unfortunately there's no way to truly check this without try/catch `new argument` in old environments
		return typeof argument === 'function' && !!argument.prototype;
	***REMOVED***;
***REMOVED***
