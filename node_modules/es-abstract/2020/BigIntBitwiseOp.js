'use strict';

var GetIntrinsic = require('get-intrinsic');

var $TypeError = GetIntrinsic('%TypeError%');
// var $BigInt = GetIntrinsic('%BigInt%', true);
// var $pow = GetIntrinsic('%Math.pow%');

// var BinaryAnd = require('./BinaryAnd');
// var BinaryOr = require('./BinaryOr');
// var BinaryXor = require('./BinaryXor');
var Type = require('./Type');
// var modulo = require('./modulo');

// var zero = $BigInt && $BigInt(0);
// var negOne = $BigInt && $BigInt(-1);
// var two = $BigInt && $BigInt(2);

// https://262.ecma-international.org/11.0/#sec-bigintbitwiseop

module.exports = function BigIntBitwiseOp(op, x, y) ***REMOVED***
	if (op !== '&' && op !== '|' && op !== '^') ***REMOVED***
		throw new $TypeError('Assertion failed: `op` must be `&`, `|`, or `^`');
	***REMOVED***
	if (Type(x) !== 'BigInt' || Type(y) !== 'BigInt') ***REMOVED***
		throw new $TypeError('`x` and `y` must be BigInts');
	***REMOVED***

	if (op === '&') ***REMOVED***
		return x & y;
	***REMOVED***
	if (op === '|') ***REMOVED***
		return x | y;
	***REMOVED***
	return x ^ y;
	/*
	var result = zero;
	var shift = 0;
	while (x !== zero && x !== negOne && y !== zero && y !== negOne) ***REMOVED***
		var xDigit = modulo(x, two);
		var yDigit = modulo(y, two);
		if (op === '&') ***REMOVED***
			result += $pow(2, shift) * BinaryAnd(xDigit, yDigit);
		***REMOVED*** else if (op === '|') ***REMOVED***
			result += $pow(2, shift) * BinaryOr(xDigit, yDigit);
		***REMOVED*** else if (op === '^') ***REMOVED***
			result += $pow(2, shift) * BinaryXor(xDigit, yDigit);
		***REMOVED***
		shift += 1;
		x = (x - xDigit) / two;
		y = (y - yDigit) / two;
	***REMOVED***
	var tmp;
	if (op === '&') ***REMOVED***
		tmp = BinaryAnd(modulo(x, two), modulo(y, two));
	***REMOVED*** else if (op === '|') ***REMOVED***
		tmp = BinaryAnd(modulo(x, two), modulo(y, two));
	***REMOVED*** else ***REMOVED***
		tmp = BinaryXor(modulo(x, two), modulo(y, two));
	***REMOVED***
	if (tmp !== 0) ***REMOVED***
		result -= $pow(2, shift);
	***REMOVED***
    return result;
    */
***REMOVED***;
