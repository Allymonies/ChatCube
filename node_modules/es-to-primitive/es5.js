'use strict';

var toStr = Object.prototype.toString;

var isPrimitive = require('./helpers/isPrimitive');

var isCallable = require('is-callable');

// http://ecma-international.org/ecma-262/5.1/#sec-8.12.8
var ES5internalSlots = ***REMOVED***
	'[[DefaultValue]]': function (O) ***REMOVED***
		var actualHint;
		if (arguments.length > 1) ***REMOVED***
			actualHint = arguments[1];
		***REMOVED*** else ***REMOVED***
			actualHint = toStr.call(O) === '[object Date]' ? String : Number;
		***REMOVED***

		if (actualHint === String || actualHint === Number) ***REMOVED***
			var methods = actualHint === String ? ['toString', 'valueOf'] : ['valueOf', 'toString'];
			var value, i;
			for (i = 0; i < methods.length; ++i) ***REMOVED***
				if (isCallable(O[methods[i]])) ***REMOVED***
					value = O[methods[i]]();
					if (isPrimitive(value)) ***REMOVED***
						return value;
					***REMOVED***
				***REMOVED***
			***REMOVED***
			throw new TypeError('No default value');
		***REMOVED***
		throw new TypeError('invalid [[DefaultValue]] hint supplied');
	***REMOVED***
***REMOVED***;

// http://ecma-international.org/ecma-262/5.1/#sec-9.1
module.exports = function ToPrimitive(input) ***REMOVED***
	if (isPrimitive(input)) ***REMOVED***
		return input;
	***REMOVED***
	if (arguments.length > 1) ***REMOVED***
		return ES5internalSlots['[[DefaultValue]]'](input, arguments[1]);
	***REMOVED***
	return ES5internalSlots['[[DefaultValue]]'](input);
***REMOVED***;
