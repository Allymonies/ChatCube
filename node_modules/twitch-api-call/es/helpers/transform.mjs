import ***REMOVED*** __awaiter, __generator ***REMOVED*** from "tslib";
import ***REMOVED*** HttpStatusCodeError ***REMOVED*** from "../errors/HttpStatusCodeError.mjs";
/** @private */
export function transformTwitchApiResponse(response) ***REMOVED***
    return __awaiter(this, void 0, Promise, function () ***REMOVED***
        var _a, _b, text;
        return __generator(this, function (_c) ***REMOVED***
            switch (_c.label) ***REMOVED***
                case 0:
                    if (!!response.ok) return [3 /*break*/, 2];
                    _a = HttpStatusCodeError.bind;
                    _b = [void 0, response.status, response.statusText];
                    return [4 /*yield*/, response.json()];
                case 1: throw new (_a.apply(HttpStatusCodeError, _b.concat([_c.sent()])))();
                case 2:
                    if (response.status === 204) ***REMOVED***
                        return [2 /*return*/, undefined]; // oof
                    ***REMOVED***
                    return [4 /*yield*/, response.text()];
                case 3:
                    text = _c.sent();
                    if (!text) ***REMOVED***
                        return [2 /*return*/, undefined]; // mega oof - twitch doesn't return a response when it should
                    ***REMOVED***
                    return [2 /*return*/, JSON.parse(text)];
            ***REMOVED***
        ***REMOVED***);
    ***REMOVED***);
***REMOVED***
