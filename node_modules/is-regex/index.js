'use strict';

var callBound = require('call-bind/callBound');
var hasToStringTag = require('has-tostringtag/shams')();
var has;
var $exec;
var isRegexMarker;
var badStringifier;

if (hasToStringTag) ***REMOVED***
	has = callBound('Object.prototype.hasOwnProperty');
	$exec = callBound('RegExp.prototype.exec');
	isRegexMarker = ***REMOVED******REMOVED***;

	var throwRegexMarker = function () ***REMOVED***
		throw isRegexMarker;
	***REMOVED***;
	badStringifier = ***REMOVED***
		toString: throwRegexMarker,
		valueOf: throwRegexMarker
	***REMOVED***;

	if (typeof Symbol.toPrimitive === 'symbol') ***REMOVED***
		badStringifier[Symbol.toPrimitive] = throwRegexMarker;
	***REMOVED***
***REMOVED***

var $toString = callBound('Object.prototype.toString');
var gOPD = Object.getOwnPropertyDescriptor;
var regexClass = '[object RegExp]';

module.exports = hasToStringTag
	// eslint-disable-next-line consistent-return
	? function isRegex(value) ***REMOVED***
		if (!value || typeof value !== 'object') ***REMOVED***
			return false;
		***REMOVED***

		var descriptor = gOPD(value, 'lastIndex');
		var hasLastIndexDataProperty = descriptor && has(descriptor, 'value');
		if (!hasLastIndexDataProperty) ***REMOVED***
			return false;
		***REMOVED***

		try ***REMOVED***
			$exec(value, badStringifier);
		***REMOVED*** catch (e) ***REMOVED***
			return e === isRegexMarker;
		***REMOVED***
	***REMOVED***
	: function isRegex(value) ***REMOVED***
		// In older browsers, typeof regex incorrectly returns 'function'
		if (!value || (typeof value !== 'object' && typeof value !== 'function')) ***REMOVED***
			return false;
		***REMOVED***

		return $toString(value) === regexClass;
	***REMOVED***;
