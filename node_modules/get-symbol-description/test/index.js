'use strict';

var test = require('tape');
var debug = require('object-inspect');
var forEach = require('foreach');
var has = require('has');
var v = require('es-value-fixtures');

var getSymbolDescription = require('../');
var getInferredName = require('../getInferredName');

test('getSymbolDescription', function (t) ***REMOVED***
	t.test('no symbols', ***REMOVED*** skip: v.hasSymbols ***REMOVED***, function (st) ***REMOVED***
		st['throws'](
			getSymbolDescription,
			SyntaxError,
			'requires Symbol support'
		);

		st.end();
	***REMOVED***);

	forEach(v.nonSymbolPrimitives.concat(v.objects), function (nonSymbol) ***REMOVED***
		t['throws'](
			function () ***REMOVED*** getSymbolDescription(nonSymbol); ***REMOVED***,
			v.hasSymbols ? TypeError : SyntaxError,
			debug(nonSymbol) + ' is not a Symbol'
		);
	***REMOVED***);

	t.test('with symbols', ***REMOVED*** skip: !v.hasSymbols ***REMOVED***, function (st) ***REMOVED***
		forEach(
			[
				[Symbol(), undefined],
				[Symbol(undefined), undefined],
				[Symbol(null), 'null'],
				[Symbol.iterator, 'Symbol.iterator'],
				[Symbol('foo'), 'foo']
			],
			function (pair) ***REMOVED***
				var sym = pair[0];
				var desc = pair[1];
				st.equal(getSymbolDescription(sym), desc, debug(sym) + ' description is ' + debug(desc));
			***REMOVED***
		);

		st.test('only possible when inference or native `Symbol.prototype.description` is supported', ***REMOVED***
			skip: !getInferredName && !has(Symbol.prototype, 'description')
		***REMOVED***, function (s2t) ***REMOVED***
			s2t.equal(getSymbolDescription(Symbol('')), '', 'Symbol("") description is ""');

			s2t.end();
		***REMOVED***);

		st.test('only possible when global symbols are supported', ***REMOVED***
			skip: !has(Symbol, 'for') || !has(Symbol, 'keyFor')
		***REMOVED***, function (s2t) ***REMOVED***
			// eslint-disable-next-line no-restricted-properties
			s2t.equal(getSymbolDescription(Symbol['for']('')), '', 'Symbol.for("") description is ""');
			s2t.end();
		***REMOVED***);

		st.end();
	***REMOVED***);

	t.end();
***REMOVED***);
