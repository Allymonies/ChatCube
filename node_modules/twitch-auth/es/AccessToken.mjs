import ***REMOVED*** __decorate ***REMOVED*** from "tslib";
import ***REMOVED*** Enumerable ***REMOVED*** from '@d-fischer/shared-utils';
import ***REMOVED*** rtfm ***REMOVED*** from 'twitch-common';
/**
 * Represents the data of an OAuth access token returned by Twitch.
 */
var AccessToken = /** @class */ (function () ***REMOVED***
    /** @private */
    function AccessToken(data, obtainmentDate) ***REMOVED***
        this._data = data;
        this._obtainmentDate = obtainmentDate !== null && obtainmentDate !== void 0 ? obtainmentDate : new Date();
    ***REMOVED***
    Object.defineProperty(AccessToken.prototype, "accessToken", ***REMOVED***
        /**
         * The access token which is necessary for every request to the Twitch API.
         */
        get: function () ***REMOVED***
            return this._data.access_token;
    ***REMOVED***
        enumerable: false,
        configurable: true
    ***REMOVED***);
    Object.defineProperty(AccessToken.prototype, "refreshToken", ***REMOVED***
        /**
         * The refresh token which is necessary to refresh the access token once it expires.
         */
        get: function () ***REMOVED***
            return this._data.refresh_token;
    ***REMOVED***
        enumerable: false,
        configurable: true
    ***REMOVED***);
    Object.defineProperty(AccessToken.prototype, "expiryDate", ***REMOVED***
        /**
         * The time when the access token will expire.
         *
         * May be `null`, in which case the token does not expire.
         * This can only be the case with very old Client IDs.
         */
        get: function () ***REMOVED***
            if (!this._data.expires_in) ***REMOVED***
                return null;
            ***REMOVED***
            return new Date(this._obtainmentDate.getTime() + this._data.expires_in * 1000);
    ***REMOVED***
        enumerable: false,
        configurable: true
    ***REMOVED***);
    Object.defineProperty(AccessToken.prototype, "isExpired", ***REMOVED***
        get: function () ***REMOVED***
            if (!this._data.expires_in) ***REMOVED***
                return false;
            ***REMOVED***
            return Date.now() > this._obtainmentDate.getTime() + this._data.expires_in * 1000;
    ***REMOVED***
        enumerable: false,
        configurable: true
    ***REMOVED***);
    Object.defineProperty(AccessToken.prototype, "scope", ***REMOVED***
        /**
         * The scope the access token is valid for, i.e. what the token enables you to do.
         */
        get: function () ***REMOVED***
            var _a;
            return (_a = this._data.scope) !== null && _a !== void 0 ? _a : [];
    ***REMOVED***
        enumerable: false,
        configurable: true
    ***REMOVED***);
    __decorate([
        Enumerable(false)
    ], AccessToken.prototype, "_data", void 0);
    AccessToken = __decorate([
        rtfm('twitch-auth', 'AccessToken')
    ], AccessToken);
    return AccessToken;
***REMOVED***());
export ***REMOVED*** AccessToken ***REMOVED***;
