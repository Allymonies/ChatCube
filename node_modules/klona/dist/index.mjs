export function klona(x) ***REMOVED***
	if (typeof x !== 'object') return x;

	var k, tmp, str=Object.prototype.toString.call(x);

	if (str === '[object Object]') ***REMOVED***
		if (x.constructor !== Object && typeof x.constructor === 'function') ***REMOVED***
			tmp = new x.constructor();
			for (k in x) ***REMOVED***
				if (x.hasOwnProperty(k) && tmp[k] !== x[k]) ***REMOVED***
					tmp[k] = klona(x[k]);
				***REMOVED***
			***REMOVED***
		***REMOVED*** else ***REMOVED***
			tmp = ***REMOVED******REMOVED***; // null
			for (k in x) ***REMOVED***
				if (k === '__proto__') ***REMOVED***
					Object.defineProperty(tmp, k, ***REMOVED***
						value: klona(x[k]),
						configurable: true,
						enumerable: true,
						writable: true,
					***REMOVED***);
				***REMOVED*** else ***REMOVED***
					tmp[k] = klona(x[k]);
				***REMOVED***
			***REMOVED***
		***REMOVED***
		return tmp;
	***REMOVED***

	if (str === '[object Array]') ***REMOVED***
		k = x.length;
		for (tmp=Array(k); k--;) ***REMOVED***
			tmp[k] = klona(x[k]);
		***REMOVED***
		return tmp;
	***REMOVED***

	if (str === '[object Set]') ***REMOVED***
		tmp = new Set;
		x.forEach(function (val) ***REMOVED***
			tmp.add(klona(val));
		***REMOVED***);
		return tmp;
	***REMOVED***

	if (str === '[object Map]') ***REMOVED***
		tmp = new Map;
		x.forEach(function (val, key) ***REMOVED***
			tmp.set(klona(key), klona(val));
		***REMOVED***);
		return tmp;
	***REMOVED***

	if (str === '[object Date]') ***REMOVED***
		return new Date(+x);
	***REMOVED***

	if (str === '[object RegExp]') ***REMOVED***
		tmp = new RegExp(x.source, x.flags);
		tmp.lastIndex = x.lastIndex;
		return tmp;
	***REMOVED***

	if (str === '[object DataView]') ***REMOVED***
		return new x.constructor( klona(x.buffer) );
	***REMOVED***

	if (str === '[object ArrayBuffer]') ***REMOVED***
		return x.slice(0);
	***REMOVED***

	// ArrayBuffer.isView(x)
	// ~> `new` bcuz `Buffer.slice` => ref
	if (str.slice(-6) === 'Array]') ***REMOVED***
		return new x.constructor(x);
	***REMOVED***

	return x;
***REMOVED***
